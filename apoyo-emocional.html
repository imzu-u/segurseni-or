<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥dulo 4: Apoyo Emocional - SegurSenior</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #059669 0%, #047857 50%, #065f46 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(5, 150, 105, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #059669 0%, #065f46 100%);
            color: white;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        header button {
            background: rgba(255, 255, 255, 0.3);
            border: none;
            color: white;
            font-size: 24px;
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        header button:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.1);
        }

        header h1 {
            flex: 1;
            font-size: 28px;
            text-align: center;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #059669, #065f46);
            width: 8.3%;
            transition: width 0.5s ease;
        }

        .content {
            padding: 40px;
            min-height: 500px;
        }

        .panel {
            display: none;
            animation: fadeIn 0.5s;
        }

        .panel.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .panel h2 {
            color: #059669;
            font-size: 28px;
            margin-bottom: 30px;
            text-align: center;
        }

        .lesson-content {
            font-size: 18px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 30px;
        }

        .lesson-content p {
            margin-bottom: 20px;
        }

        .lesson-content .emoji {
            font-size: 40px;
            margin: 20px 0;
        }

        .question {
            font-size: 20px;
            font-weight: bold;
            color: #059669;
            margin-bottom: 25px;
            text-align: center;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            padding: 18px;
            border: 3px solid #059669;
            border-radius: 12px;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
            background: white;
            color: #333;
        }

        .option:hover {
            background: #059669;
            color: white;
            transform: translateX(10px);
        }

        .option.selected {
            background: #059669;
            color: white;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 40px;
            justify-content: center;
        }

        button {
            padding: 15px 30px;
            font-size: 18px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-next {
            background: linear-gradient(135deg, #059669, #065f46);
            color: white;
            flex: 1;
            max-width: 300px;
        }

        .btn-next:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(5, 150, 105, 0.4);
        }

        .btn-next:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* WORD SEARCH GAME */
        .word-search-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .word-grid {
            display: grid;
            grid-template-columns: repeat(8, 50px);
            gap: 8px;
            margin: 30px 0;
        }

        .letter {
            width: 50px;
            height: 50px;
            border: 2px solid #059669;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
            background: white;
            transition: all 0.3s;
            user-select: none;
        }

        .letter:hover {
            background: #d1fae5;
            transform: scale(1.1);
        }

        .letter.found {
            background: #059669;
            color: white;
            font-weight: bold;
        }

        .word-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .word-item {
            padding: 12px;
            border: 2px solid #059669;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            background: white;
            transition: all 0.3s;
        }

        .word-item.found {
            background: #059669;
            color: white;
            text-decoration: line-through;
        }

        .game-title {
            font-size: 24px;
            color: #059669;
            font-weight: bold;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }

            header h1 {
                font-size: 20px;
            }

            .panel h2 {
                font-size: 22px;
            }

            .word-grid {
                grid-template-columns: repeat(6, 40px);
            }

            .letter {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }

            .question {
                font-size: 16px;
            }

            .option {
                font-size: 16px;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <button onclick="goBack()">‚Üê Atr√°s</button>
            <h1>‚ù§Ô∏è Apoyo Emocional</h1>
        </header>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="content">
            <!-- PANEL 1: LECCIONES -->
            <div class="panel active" id="panel1">
                <h2>üéì M√≥dulo 4: Apoyo Emocional</h2>
                <div class="lesson-content">
                    <div class="emoji">üíù</div>
                    <h3 style="color: #059669; margin-bottom: 20px;">Lecci√≥n 1: Importancia del Apoyo Emocional</h3>
                    <p>Tu salud mental es tan importante como tu salud f√≠sica:</p>
                    <p>‚úì El apoyo emocional reduce estr√©s y ansiedad<br>
                    ‚úì Mejora tu calidad de vida y bienestar<br>
                    ‚úì Fortalece tu autoestima y confianza<br>
                    ‚úì Te ayuda a enfrentar desaf√≠os<br>
                    ‚úì Previene depresi√≥n y aislamiento</p>

                    <div class="emoji">ü§ù</div>
                    <h3 style="color: #059669; margin-bottom: 20px;">Lecci√≥n 2: Redes de Apoyo</h3>
                    <p>Construye tu red de personas que te apoyen:</p>
                    <p>‚úì Familia cercana y de confianza<br>
                    ‚úì Amigos verdaderos que te escuchan<br>
                    ‚úì Comunidad y organizaciones locales<br>
                    ‚úì Profesionales de salud mental<br>
                    ‚úì Grupos de apoyo con intereses similares</p>

                    <div class="emoji">üôã‚Äç‚ôÄÔ∏è</div>
                    <h3 style="color: #059669; margin-bottom: 20px;">Lecci√≥n 3: Pedir Ayuda Sin Verg√ºenza</h3>
                    <p>Pedir ayuda es un acto de valent√≠a:</p>
                    <p>‚úì No hay verg√ºenza en necesitar ayuda<br>
                    ‚úì Todos necesitamos apoyo en alg√∫n momento<br>
                    ‚úì Hablar sobre tus sentimientos es saludable<br>
                    ‚úì Busca profesionales si lo necesitas<br>
                    ‚úì Cuida tu autocuidado todos los d√≠as</p>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(2)">Siguiente ‚Üí</button>
                </div>
            </div>

            <!-- PANEL 2-11: PREGUNTAS -->
            <div class="panel" id="panel2">
                <div class="question">‚ùì Pregunta 1: ¬øPor qu√© es importante el apoyo emocional?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">No es importante</div>
                    <div class="option" onclick="selectAnswer(this)">Reduce estr√©s y mejora la salud mental</div>
                    <div class="option" onclick="selectAnswer(this)">Solo para personas d√©biles</div>
                    <div class="option" onclick="selectAnswer(this)">Es una p√©rdida de tiempo</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(1)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(3)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel3">
                <div class="question">‚ùì Pregunta 2: ¬øQu√© es una red de apoyo?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">Internet</div>
                    <div class="option" onclick="selectAnswer(this)">Grupo de personas que te apoyan</div>
                    <div class="option" onclick="selectAnswer(this)">Un televisor</div>
                    <div class="option" onclick="selectAnswer(this)">Una aplicaci√≥n</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(2)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(4)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel4">
                <div class="question">‚ùì Pregunta 3: ¬øEs correcto sentir que necesitas apoyo?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">No, es signo de debilidad</div>
                    <div class="option" onclick="selectAnswer(this)">S√≠, es completamente normal</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si eres mayor</div>
                    <div class="option" onclick="selectAnswer(this)">Nunca es correcto</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(3)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(5)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel5">
                <div class="question">‚ùì Pregunta 4: ¬øCu√°l es parte de una red de apoyo?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">Solo internet</div>
                    <div class="option" onclick="selectAnswer(this)">Familia, amigos, comunidad y profesionales</div>
                    <div class="option" onclick="selectAnswer(this)">Solo dinero</div>
                    <div class="option" onclick="selectAnswer(this)">Solo medicina</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(4)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(6)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel6">
                <div class="question">‚ùì Pregunta 5: ¬øHay verg√ºenza en pedir ayuda?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">S√≠, siempre hay verg√ºenza</div>
                    <div class="option" onclick="selectAnswer(this)">No, pedir ayuda es un acto de valent√≠a</div>
                    <div class="option" onclick="selectAnswer(this)">Solo para hombres</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si es dinero</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(5)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(7)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel7">
                <div class="question">‚ùì Pregunta 6: ¬øHablar sobre tus sentimientos es saludable?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">No, es mejor guardarse</div>
                    <div class="option" onclick="selectAnswer(this)">S√≠, es muy saludable expresarlos</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si es emergencia</div>
                    <div class="option" onclick="selectAnswer(this)">No tiene efecto</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(6)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(8)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel8">
                <div class="question">‚ùì Pregunta 7: ¬øDebes practicar autocuidado?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">No, es ego√≠smo</div>
                    <div class="option" onclick="selectAnswer(this)">S√≠, es fundamental para tu bienestar</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si tienes dinero</div>
                    <div class="option" onclick="selectAnswer(this)">Solo los ricos</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(7)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(9)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel9">
                <div class="question">‚ùì Pregunta 8: ¬øCu√°ndo debes buscar ayuda profesional?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">Nunca</div>
                    <div class="option" onclick="selectAnswer(this)">Cuando lo necesites, sin esperar crisis</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si tienes dinero</div>
                    <div class="option" onclick="selectAnswer(this)">Solo en emergencia grave</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(8)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(10)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel10">
                <div class="question">‚ùì Pregunta 9: ¬øQu√© previene tener apoyo emocional?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">Nada, no ayuda</div>
                    <div class="option" onclick="selectAnswer(this)">Depresi√≥n, aislamiento y enfermedades</div>
                    <div class="option" onclick="selectAnswer(this)">Felicidad</div>
                    <div class="option" onclick="selectAnswer(this)">Nada, es in√∫til</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(9)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(11)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel11">
                <div class="question">‚ùì Pregunta 10: ¬øPuedes crear una red de apoyo?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">No es posible</div>
                    <div class="option" onclick="selectAnswer(this)">S√≠, buscando personas confiables</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si eres rico</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si tienes familia</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(10)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(12)">Siguiente ‚Üí</button>
                </div>
            </div>

            <!-- PANEL 12: JUEGO - WORD SEARCH -->
            <div class="panel" id="panel12">
                <div class="game-title">üéÆ Juego Final: Sopa de Letras</div>
                <p style="text-align: center; margin-bottom: 20px; font-size: 16px;">Encuentra las palabras sobre apoyo emocional:</p>
                
                <div class="word-list" id="wordList">
                    <div class="word-item">APOYO</div>
                    <div class="word-item">FAMILIA</div>
                    <div class="word-item">AMIGOS</div>
                    <div class="word-item">CONFIANZA</div>
                    <div class="word-item">ESCUCHA</div>
                    <div class="word-item">AYUDA</div>
                    <div class="word-item">COMUNIDAD</div>
                    <div class="word-item">CUIDADO</div>
                </div>

                <div style="text-align: center;">
                    <div class="word-grid" id="wordGrid"></div>
                </div>

                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(11)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="completeModuleWithGame()">Completar M√≥dulo ‚úì</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentPanel = 1;
        let selectedAnswers = {};
        let foundWords = new Set();

        const wordSearchLetters = [
            ['A', 'P', 'O', 'Y', 'O', 'S', 'X', 'Z'],
            ['F', 'A', 'M', 'I', 'L', 'I', 'A', 'W'],
            ['A', 'M', 'I', 'G', 'O', 'S', 'Y', 'Q'],
            ['C', 'O', 'N', 'F', 'I', 'A', 'N', 'Z'],
            ['A', 'E', 'S', 'C', 'U', 'C', 'H', 'A'],
            ['A', 'Y', 'U', 'D', 'A', 'B', 'C', 'D'],
            ['C', 'O', 'M', 'U', 'N', 'I', 'D', 'A'],
            ['C', 'U', 'I', 'D', 'A', 'D', 'O', 'S']
        ];

        function goBack() {
            if (confirm('¬øDeseas volver atr√°s y perder el progreso?')) {
                window.history.back();
            }
        }

        function goToPanel(panelNumber) {
            document.getElementById(`panel${currentPanel}`).classList.remove('active');
            currentPanel = panelNumber;
            document.getElementById(`panel${currentPanel}`).classList.add('active');
            updateProgress();
            
            if (currentPanel === 12) {
                initWordSearch();
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateProgress() {
            const progress = (currentPanel / 12) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function selectAnswer(element) {
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            selectedAnswers[currentPanel] = element.textContent;
        }

        function initWordSearch() {
            const wordGrid = document.getElementById('wordGrid');
            wordGrid.innerHTML = '';
            
            wordSearchLetters.forEach((row, rowIdx) => {
                row.forEach((letter, colIdx) => {
                    const letterDiv = document.createElement('div');
                    letterDiv.className = 'letter';
                    letterDiv.textContent = letter;
                    letterDiv.onclick = () => toggleLetter(letterDiv, rowIdx, colIdx);
                    letterDiv.id = `letter-${rowIdx}-${colIdx}`;
                    wordGrid.appendChild(letterDiv);
                });
            });
        }

        function toggleLetter(element, row, col) {
            element.classList.toggle('found');
            checkWords();
        }

        function checkWords() {
            const letters = document.querySelectorAll('.letter');
            const found = new Set();
            
            letters.forEach(letter => {
                if (letter.classList.contains('found')) {
                    found.add(letter.textContent);
                }
            });

            updateWordList();
        }

        function updateWordList() {
            const wordItems = document.querySelectorAll('.word-item');
            wordItems.forEach(item => {
                const word = item.textContent;
                const gridText = Array.from(document.querySelectorAll('.letter.found'))
                    .map(l => l.textContent)
                    .join('');
                
                if (gridText.includes(word) || word.split('').every(char => 
                    Array.from(document.querySelectorAll('.letter.found')).some(l => l.textContent === char))) {
                    item.classList.add('found');
                }
            });
        }

        function completeModuleWithGame() {
            const foundCount = document.querySelectorAll('.word-item.found').length;
            if (foundCount >= 5) {
                const currentUser = localStorage.getItem('currentUser');
                if (currentUser) {
                    const users = JSON.parse(localStorage.getItem('users'));
                    const user = users[currentUser];
                    
                    user.points = (user.points || 0) + 100;
                    
                    if (!user.completedModules) {
                        user.completedModules = [];
                    }
                    if (!user.completedModules.includes('Apoyo emocional')) {
                        user.completedModules.push('Apoyo emocional');
                    }
                    
                    users[currentUser] = user;
                    localStorage.setItem('users', JSON.stringify(users));
                }
                
                alert('üéâ ¬°Felicitaciones! Has completado el m√≥dulo de Apoyo Emocional.\n\nRecuerda: Cuidar tu salud emocional es cuidarte a ti mismo.\n\n+100 puntos ganados');
                window.location.href = 'index.html';
            } else {
                alert('Sigue intentando encontrar m√°s palabras para completar el m√≥dulo.');
            }
        }

        updateProgress();
    </script>
</body>
</html>