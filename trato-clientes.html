<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥dulo 3: Trato con Clientes - SegurSenior</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ea580c 0%, #d84315 50%, #bf360c 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(234, 88, 12, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #ea580c 0%, #bf360c 100%);
            color: white;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        header button {
            background: rgba(255, 255, 255, 0.3);
            border: none;
            color: white;
            font-size: 24px;
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        header button:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.1);
        }

        header h1 {
            flex: 1;
            font-size: 28px;
            text-align: center;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ea580c, #bf360c);
            width: 8.3%;
            transition: width 0.5s ease;
        }

        .content {
            padding: 40px;
            min-height: 500px;
        }

        .panel {
            display: none;
            animation: fadeIn 0.5s;
        }

        .panel.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .panel h2 {
            color: #ea580c;
            font-size: 28px;
            margin-bottom: 30px;
            text-align: center;
        }

        .lesson-content {
            font-size: 18px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 30px;
        }

        .lesson-content p {
            margin-bottom: 20px;
        }

        .lesson-content .emoji {
            font-size: 40px;
            margin: 20px 0;
        }

        .question {
            font-size: 20px;
            font-weight: bold;
            color: #ea580c;
            margin-bottom: 25px;
            text-align: center;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            padding: 18px;
            border: 3px solid #ea580c;
            border-radius: 12px;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
            background: white;
            color: #333;
        }

        .option:hover {
            background: #ea580c;
            color: white;
            transform: translateX(10px);
        }

        .option.selected {
            background: #ea580c;
            color: white;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 40px;
            justify-content: center;
        }

        button {
            padding: 15px 30px;
            font-size: 18px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-next {
            background: linear-gradient(135deg, #ea580c, #bf360c);
            color: white;
            flex: 1;
            max-width: 300px;
        }

        .btn-next:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(234, 88, 12, 0.4);
        }

        .btn-next:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* MEMORY GAME */
        .memory-game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
            max-width: 600px;
        }

        .memory-card {
            min-height: 120px;
            background: linear-gradient(135deg, #ea580c, #d84315);
            border-radius: 12px;
            cursor: pointer;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
            border: 3px solid #bf360c;
            user-select: none;
            text-align: center;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(234, 88, 12, 0.3);
        }

        .memory-card:hover:not(.flipped) {
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(234, 88, 12, 0.5);
        }

        .memory-card.flipped {
            background: white;
            color: #ea580c;
            font-size: 13px;
        }

        .memory-card.matched {
            background: #10b981;
            color: white;
            cursor: default;
        }

        .game-info {
            font-size: 18px;
            font-weight: bold;
            color: #ea580c;
            text-align: center;
        }

        .game-title {
            font-size: 24px;
            color: #ea580c;
            font-weight: bold;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }

            header h1 {
                font-size: 20px;
            }

            .panel h2 {
                font-size: 22px;
            }

            .memory-grid {
                grid-template-columns: repeat(1, 1fr);
                max-width: 100%;
            }

            .question {
                font-size: 16px;
            }

            .option {
                font-size: 16px;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <button onclick="goBack()">‚Üê Atr√°s</button>
            <h1>üë• Trato con Clientes</h1>
        </header>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="content">
            <!-- PANEL 1: LECCIONES -->
            <div class="panel active" id="panel1">
                <h2>üéì M√≥dulo 3: Trato con Clientes</h2>
                <div class="lesson-content">
                    <div class="emoji">üí¨</div>
                    <h3 style="color: #ea580c; margin-bottom: 20px;">Lecci√≥n 1: Comunicaci√≥n Asertiva</h3>
                    <p>La asertividad es clave para una buena relaci√≥n con clientes:</p>
                    <p>‚úì Habla con claridad y confianza<br>
                    ‚úì Expresa tus l√≠mites de forma educada<br>
                    ‚úì Escucha activamente al cliente<br>
                    ‚úì Mant√©n la calma en todo momento<br>
                    ‚úì S√© honesto sobre tus servicios</p>

                    <div class="emoji">üò§</div>
                    <h3 style="color: #ea580c; margin-bottom: 20px;">Lecci√≥n 2: Manejo de Clientes Dif√≠ciles</h3>
                    <p>Estrategias para lidiar con situaciones complicadas:</p>
                    <p>‚úì No tomes el comportamiento de forma personal<br>
                    ‚úì Respira profundo antes de responder<br>
                    ‚úì Busca soluciones, no conflictos<br>
                    ‚úì Pide ayuda si la situaci√≥n se torna violenta<br>
                    ‚úì Documenta los incidentes importantes</p>

                    <div class="emoji">üö¶</div>
                    <h3 style="color: #ea580c; margin-bottom: 20px;">Lecci√≥n 3: Establecer L√≠mites</h3>
                    <p>Tus l√≠mites son derechos que debes proteger:</p>
                    <p>‚úì Define tu horario de trabajo claramente<br>
                    ‚úì No aceptes pagos por debajo del justo<br>
                    ‚úì Rechaza tareas peligrosas o ilegales<br>
                    ‚úì Pide respeto hacia tu persona<br>
                    ‚úì Ret√≠rate de situaciones abusivas</p>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(2)">Siguiente ‚Üí</button>
                </div>
            </div>

            <!-- PANEL 2-11: PREGUNTAS -->
            <div class="panel" id="panel2">
                <div class="question">‚ùì Pregunta 1: ¬øQu√© es comunicaci√≥n asertiva?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">Gritar al cliente</div>
                    <div class="option" onclick="selectAnswer(this)">Hablar con claridad y expresar l√≠mites educadamente</div>
                    <div class="option" onclick="selectAnswer(this)">Mentir sobre tus servicios</div>
                    <div class="option" onclick="selectAnswer(this)">No expresar tus opiniones</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(1)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(3)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel3">
                <div class="question">‚ùì Pregunta 2: ¬øC√≥mo debes responder ante un cliente dif√≠cil?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">Con agresi√≥n</div>
                    <div class="option" onclick="selectAnswer(this)">Con calma y buscando soluciones</div>
                    <div class="option" onclick="selectAnswer(this)">Ignor√°ndolo completamente</div>
                    <div class="option" onclick="selectAnswer(this)">Siendo irrespetuoso</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(2)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(4)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel4">
                <div class="question">‚ùì Pregunta 3: ¬øEs importante establecer l√≠mites con clientes?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">No, nunca</div>
                    <div class="option" onclick="selectAnswer(this)">S√≠, es fundamental para tu bienestar</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si eres hombre</div>
                    <div class="option" onclick="selectAnswer(this)">Solo despu√©s de 5 a√±os</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(3)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(5)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel5">
                <div class="question">‚ùì Pregunta 4: ¬øDebes aceptar un pago injusto?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">S√≠, siempre</div>
                    <div class="option" onclick="selectAnswer(this)">No, tienes derecho a un salario justo</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si tienes hambre</div>
                    <div class="option" onclick="selectAnswer(this)">Depende del color del cliente</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(4)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(6)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel6">
                <div class="question">‚ùì Pregunta 5: ¬øQu√© debes hacer si te sientes en peligro?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">Aguantar sin decir nada</div>
                    <div class="option" onclick="selectAnswer(this)">Pedir ayuda y retirarte de la situaci√≥n</div>
                    <div class="option" onclick="selectAnswer(this)">Responder con violencia</div>
                    <div class="option" onclick="selectAnswer(this)">Ignorar la situaci√≥n</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(5)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(7)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel7">
                <div class="question">‚ùì Pregunta 6: ¬øEs tu responsabilidad escuchar al cliente?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">No, nunca</div>
                    <div class="option" onclick="selectAnswer(this)">S√≠, escuchar activamente mejora la relaci√≥n</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si es amable</div>
                    <div class="option" onclick="selectAnswer(this)">Solo en cliente VIP</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(6)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(8)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel8">
                <div class="question">‚ùì Pregunta 7: ¬øDebes realizar tareas peligrosas o ilegales?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">S√≠, por dinero</div>
                    <div class="option" onclick="selectAnswer(this)">No, tienes derecho a rechazarlas</div>
                    <div class="option" onclick="selectAnswer(this)">Tal vez, si paga bien</div>
                    <div class="option" onclick="selectAnswer(this)">Solo los lunes</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(7)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(9)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel9">
                <div class="question">‚ùì Pregunta 8: ¬øC√≥mo debes establecer tu horario?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">Sin definir, seg√∫n lo que el cliente quiera</div>
                    <div class="option" onclick="selectAnswer(this)">De forma clara y comunic√°ndolo al cliente</div>
                    <div class="option" onclick="selectAnswer(this)">Trabajar 24/7</div>
                    <div class="option" onclick="selectAnswer(this)">No tener horarios nunca</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(8)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(10)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel10">
                <div class="question">‚ùì Pregunta 9: ¬øDebes documentar incidentes importantes?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">No, es una p√©rdida de tiempo</div>
                    <div class="option" onclick="selectAnswer(this)">S√≠, para tener prueba de lo sucedido</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si pierdes dinero</div>
                    <div class="option" onclick="selectAnswer(this)">Nunca es importante</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(9)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(11)">Siguiente ‚Üí</button>
                </div>
            </div>

            <div class="panel" id="panel11">
                <div class="question">‚ùì Pregunta 10: ¬øCu√°ndo debes respirar profundo en una situaci√≥n conflictiva?</div>
                <div class="options">
                    <div class="option" onclick="selectAnswer(this)">Nunca</div>
                    <div class="option" onclick="selectAnswer(this)">Antes de responder para mantener la calma</div>
                    <div class="option" onclick="selectAnswer(this)">Solo si es emergencia</div>
                    <div class="option" onclick="selectAnswer(this)">Despu√©s de discutir</div>
                </div>
                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(10)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="goToPanel(12)">Siguiente ‚Üí</button>
                </div>
            </div>

            <!-- PANEL 12: JUEGO - MEMORY GAME -->
            <div class="panel" id="panel12">
                <div class="game-title">üéÆ Juego Final: Memoria - Situaciones y Respuestas</div>
                <p style="text-align: center; margin-bottom: 20px; font-size: 16px;">Empareja cada situaci√≥n conflictiva con la respuesta apropiada.</p>
                
                <div style="text-align: center;">
                    <div class="game-info" id="matchesInfo">Emparejamientos: 0/4</div>
                    <div class="memory-grid" id="memoryGrid"></div>
                </div>

                <div class="button-group">
                    <button class="btn-next" onclick="goToPanel(11)">‚Üê Anterior</button>
                    <button class="btn-next" onclick="completeModuleWithGame()">Completar M√≥dulo ‚úì</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentPanel = 1;
        let selectedAnswers = {};
        let memoryCards = [];
        let flippedCards = [];
        let matchedPairs = 0;

        const memoryPairs = [
            { pair: 'Cliente agresivo', label: 'Responder con calma' },
            { pair: 'Pago muy bajo', label: 'Rechazar y negociar' },
            { pair: 'Cliente insultante', label: 'Buscar ayuda' },
            { pair: 'Solicitud ilegal', label: 'Rechazar claramente' },
            { pair: 'Cliente agresivo', label: 'Responder con calma' },
            { pair: 'Pago muy bajo', label: 'Rechazar y negociar' },
            { pair: 'Cliente insultante', label: 'Buscar ayuda' },
            { pair: 'Solicitud ilegal', label: 'Rechazar claramente' }
        ];

        function goBack() {
            if (confirm('¬øDeseas volver atr√°s y perder el progreso?')) {
                window.history.back();
            }
        }

        function goToPanel(panelNumber) {
            document.getElementById(`panel${currentPanel}`).classList.remove('active');
            currentPanel = panelNumber;
            document.getElementById(`panel${currentPanel}`).classList.add('active');
            updateProgress();
            
            if (currentPanel === 12) {
                initMemoryGame();
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateProgress() {
            const progress = (currentPanel / 12) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function selectAnswer(element) {
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            selectedAnswers[currentPanel] = element.textContent;
        }

        function initMemoryGame() {
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';
            memoryCards = [...memoryPairs].sort(() => Math.random() - 0.5);
            matchedPairs = 0;
            flippedCards = [];

            memoryCards.forEach((card, index) => {
                const cardEl = document.createElement('div');
                cardEl.className = 'memory-card';
                cardEl.dataset.index = index;
                cardEl.dataset.pair = card.pair;
                cardEl.textContent = '?';
                cardEl.onclick = () => flipCard(cardEl, index);
                grid.appendChild(cardEl);
            });
        }

        function flipCard(cardEl, index) {
            if (cardEl.classList.contains('flipped') || cardEl.classList.contains('matched') || flippedCards.length >= 2) {
                return;
            }

            cardEl.classList.add('flipped');
            cardEl.textContent = memoryCards[index].pair || memoryCards[index].label;
            flippedCards.push({ el: cardEl, index: index, data: memoryCards[index] });

            if (flippedCards.length === 2) {
                checkMatch();
            }
        }

        function checkMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.data.pair === card2.data.pair) {
                card1.el.classList.add('matched');
                card2.el.classList.add('matched');
                matchedPairs++;
                document.getElementById('matchesInfo').textContent = `Emparejamientos: ${matchedPairs}/4`;
                flippedCards = [];
            } else {
                setTimeout(() => {
                    card1.el.classList.remove('flipped');
                    card2.el.classList.remove('flipped');
                    card1.el.textContent = '?';
                    card2.el.textContent = '?';
                    flippedCards = [];
                }, 800);
            }
        }

        function completeModuleWithGame() {
            if (matchedPairs >= 3) {
                const currentUser = localStorage.getItem('currentUser');
                if (currentUser) {
                    const users = JSON.parse(localStorage.getItem('users'));
                    const user = users[currentUser];
                    
                    user.points = (user.points || 0) + 100;
                    
                    if (!user.completedModules) {
                        user.completedModules = [];
                    }
                    if (!user.completedModules.includes('Trato con clientes')) {
                        user.completedModules.push('Trato con clientes');
                    }
                    
                    users[currentUser] = user;
                    localStorage.setItem('users', JSON.stringify(users));
                }
                
                alert('üéâ ¬°Fant√°stico! Has completado el m√≥dulo de Trato con Clientes.\n\nRecuerda: Tu dignidad y seguridad siempre vienen primero.\n\n+100 puntos ganados');
                window.location.href = 'index.html';
            } else {
                alert('Sigue emparejando tarjetas para completar el m√≥dulo.');
            }
        }

        updateProgress();
    </script>
</body>
</html>